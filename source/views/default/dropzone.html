{{block head}}
<script src="{{=URL('static', 'js/vue.js')}}"></script>
<script>

  var upload_url = "{{=URL('api', 'upload_file', user_signature=True)}}";
</script>



<script src="{{=URL('static', 'js/dropzone.js')}}"></script>

<script>
$(function() {
  Dropzone.options.fileUploader = {
    maxFilesize: 40, // MB
    url: upload_url,
    addRemoveLinks: false,
    parallelUploads: 1,
    acceptedFiles: 'audio/*',
    createImageThumbnails: false,
    init: function() {
      this.on("addedfile", function() {
        if (this.files.length > 1) {
          this.removeFile(this.files[0]);
        }
      });
      this.on("success", function(file, response) {
          APP.upload_complete(response);
          this.removeAllFiles();
      })
    }
  }
});
</script>
{{end}}